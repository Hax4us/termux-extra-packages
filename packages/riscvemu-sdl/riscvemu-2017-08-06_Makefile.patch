diff -uNr riscvemu-2017-08-06/Makefile riscvemu-2017-08-06.mod/Makefile
--- riscvemu-2017-08-06/Makefile	2017-08-06 15:30:12.000000000 +0300
+++ riscvemu-2017-08-06.mod/Makefile	2018-06-27 23:31:40.598834242 +0300
@@ -26,12 +26,12 @@
 # (openssl) must be installed.
 CONFIG_FS_NET=y
 # SDL support (optional)
-CONFIG_SDL=y
+#CONFIG_SDL=y
 # if set, compile the 128 bit emulator. Note: the 128 bit target does
 # not compile if gcc does not support the int128 type (32 bit hosts).
-CONFIG_INT128=y
+#CONFIG_INT128=y
 # build x86emu
-CONFIG_X86EMU=y
+#CONFIG_X86EMU=y
 # win32 build (not usable yet)
 #CONFIG_WIN32=y
 # user space network redirector
@@ -44,13 +44,12 @@
 CROSS_PREFIX=
 EXE=
 endif
-CC=$(CROSS_PREFIX)gcc
-STRIP=$(CROSS_PREFIX)strip
-CFLAGS=-O2 -Wall -g -Werror -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -MMD
+CC=clang
+CFLAGS=-I@TERMUX_PREFIX@/include -O2 -Wall -g -Werror -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -MMD
 CFLAGS+=-D_GNU_SOURCE -DCONFIG_VERSION=\"$(shell cat VERSION)\"
-LDFLAGS=
+LDFLAGS=-L@TERMUX_PREFIX@/lib
 
-bindir=/usr/local/bin
+bindir=@TERMUX_PREFIX@/bin
 INSTALL=install
 
 PROGS+= riscvemu32$(EXE) riscvemu64$(EXE)
@@ -79,7 +78,7 @@
 
 ifndef CONFIG_WIN32
 EMU_OBJS+=fs_disk.o
-EMU_LIBS=-lrt
+EMU_LIBS=
 endif
 ifdef CONFIG_FS_NET
 CFLAGS+=-DCONFIG_FS_NET
@@ -139,7 +138,6 @@
 	$(CC) $(LDFLAGS) -o $@ $^
 
 install: $(PROGS)
-	$(STRIP) $(PROGS)
 	$(INSTALL) -m755 $(PROGS) "$(DESTDIR)$(bindir)"
 
 %.o: %.c
